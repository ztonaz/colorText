

<!DOCTYPE html>
<html>
    <head>
        <title>Page Title</title>
        <script src="https://code.jquery.com/jquery-3.1.1.js"></script>
    </head>
    
    <body>     
        <input id="name" > 
        <p id="whatIs"></p> 
        <p id="completeText"></p> 
        <br/>
        <label>Input 2:</label>
        <input id="msg" autofocus>
    </body>
   
</html>

<script type="text/javascript">

textToWrite = ["Hacemos ", "pruebas ", "escribiendo ", "codigo ", "random."]




var indexInputLen = 0
var maxInputLen = textToWrite[indexInputLen].length
indexWordIn = 0
//wordInAllText = 1000000
//letterIn = 100000000
ttw=textToWrite[indexWordIn]
document.getElementById("msg").maxLength = ttw.length
// for (i=0; i<textToWrite.length; i++){
//     ttw = ttw + textToWrite[i]
// }
document.getElementById("whatIs").innerText = ttw
document.getElementById("whatIs").maxLength = maxInputLen


w = document.getElementById("whatIs").innerText
textWithColors = ""
for (var i = 0; i < w.length; i++) {
    textWithColors = textWithColors + '<span id=' + i + ' style="color:black">' + w[i] + '</span>'
}

document.getElementById("whatIs").innerHTML = textWithColors




//get all text
/*
allText = ""
for (i=0; i<textToWrite.length;i++){

    styledText=""
    for (j=0;j<textToWrite[i].length;j++){
        styledText=styledText+'<span id =\"' + (j+letterIn) + '\" style="color:black">' + textToWrite[i][j] + '</span>'
    }
    letterIn = letterIn+100000000

    allText=allText+'<div id=\"' + (i+wordInAllText) + '\">'+styledText+'</div>'
}


document.getElementById("completeText").innerHTML = allText
*/

$(function() {

   
    

    $("#msg").on('input', function (){
   // Your stuff...
    $("#name").val($("#msg").val());

        // o text your write
        o = $("#name").val()


        lenText = o.length

        

        w = document.getElementById("whatIs").innerText

        //original text with length of your input
        original = w.substring(0, lenText)


        
        
        innerHas = document.getElementById("whatIs").innerHTML

        //console.log(o + '\n' + original)


        
        for (i=0; i<lenText; i++){
            const div = document.getElementById(i);
            
            if (o[i]==original[i]){
                div.style.color = "green"

            }
            else{
                if (div){
                    div.style.color = "red"
                }
                
            }
        }

        
        for (i=lenText; i<innerHas.length; i++){
            $( "#" + i ).css( "color", "black" );

        }



         if (lenText==maxInputLen){
               // document.getElementById("msg").value = ""
               // ++indexInputLen
               // maxInputLen = textToWrite[indexInputLen].length
               // document.getElementById("whatIs").maxLength = maxInputLen

         }


                innerHas2 = document.getElementById("whatIs").innerHTML
                lenInput = $("#msg").val().length
                console.log("my input length: "+ lenInput + "\n" + "theThext lenth: "+(w.length+1))
                if (innerHas2.includes("red")){
                    
                }
                else{
                    if(indexWordIn != textToWrite.length){
                        str1 = $("#msg").val()
                        //if word and space correct go to next word
                        if (lenInput==w.length+1 && str1.indexOf(" ") != -1){
                            ++indexWordIn
                            //++wordInAllText
                            ttw=textToWrite[indexWordIn]
                            document.getElementById("whatIs").innerText = ttw
                            w = document.getElementById("whatIs").innerText
                            textWithColors = ""
                            for (var i = 0; i < w.length; i++) {
                                textWithColors = textWithColors + '<span id=' + i + ' style="color:black">' + w[i] + '</span>'
                            }

                            document.getElementById("whatIs").innerHTML = textWithColors
                            document.getElementById("msg").value = ""
                            document.getElementById("msg").maxLength = ttw.length
                            
                        }


                         else{
                    if (str1.indexOf(".") != -1 && indexWordIn==textToWrite.length-1){
                        alert("final")
                    }

                }


                    }
               

        }

    });

    
});



//auto writing on a input
// function performSearch() {
//     const customKeyCode = Math.floor((Math.random() * 10) + 60);
    
//     // I use .gLFyf.gsfi for the selector, you can inspect your google.com in case class is different in your case
//     $('#msg').each(function(i) {
//             $(this).attr("autocomplete","on");
//             $(this).blur();
//             $(this).focus();
//             $(this).trigger($.Event("keydown", {keyCode: customKeyCode}));
//             $(this).val(String.fromCharCode(customKeyCode));
//             $(this).trigger($.Event("keypress", {keyCode: customKeyCode}));
//             $(this).trigger($.Event("keyup", {keyCode: customKeyCode}));
//                 $(this).parent().trigger('click');
//     });

//     console.log('filled ');
// }

// // initial calls
// setInterval(() => {
//     performSearch();
// }, 2000);

</script>