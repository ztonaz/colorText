

<!DOCTYPE html>
<html>
    <head>
        <title>ztonaz Fast Typing Javascript Code</title>
        <script src="https://code.jquery.com/jquery-3.1.1.js"></script>
    </head>
    
    <body>   

        <div class="theContent">  
            <button style="opacity:0.4" class="mods" id ="normal" onclick="changeToNormal()">Normal</button><p class="modinfo" id="normalText" style="opacity:1">*The whole sentence on the screen</p>
            <button style = "opacity:1;" class="mods" id="eat" onclick="changeToEat()">Eat the Word</button><p class="modinfo" id="eatText" style="opacity:0">*Just one word on the screen</p>
            <input id="theCopy" type=hidden> 
            <p id="whatIs" style="opacity: 0;"></p> 
            <p id="completeText"></p> 
            <br/>
            <input id="copy" autofocus>
            <button id="start">START</button>
            <div id="stats"></div>
        </div>
    </body>
   
</html>

<script type="text/javascript">

textToWrite = ["Hacemos ", "pruebas ", "escribiendo ", "codigo ", "random."]

//index for word in complete text
indexWordComplete=0
indexLetterComplete=0


var indexInputLen = 0
var maxInputLen = textToWrite[indexInputLen].length
indexWordIn = 0
ttw=textToWrite[indexWordIn]
document.getElementById("copy").maxLength = ttw.length

document.getElementById("whatIs").innerText = ttw
document.getElementById("whatIs").maxLength = maxInputLen

w = document.getElementById("whatIs").innerText
textWithColors = ""
for (var i = 0; i < w.length; i++) {
    textWithColors = textWithColors + '<span id=' + i + ' style="color:white">' + w[i] + '</span>'
}

document.getElementById("whatIs").innerHTML = textWithColors

//create the complete Text 
ttwComplete = textToWrite[indexWordComplete]
document.getElementById("completeText").innerText = ttwComplete

idWordComplete = 10000000

completeTextWithColors= ""
arrayTextToWriteComplete=[]
idLetterComplete = 10000
for (j=0; j<textToWrite.length; j++){

    completeLetters = textToWrite[j]
    theWord=""
    for (y=0;y<completeLetters.length;y++){
        theWord = theWord + '<span id=' + (idLetterComplete) + '>' + completeLetters[y] + '</span>'

        idLetterComplete++
    }
    arrayTextToWriteComplete.push(theWord)


    completeTextWithColors = completeTextWithColors + '<span id=' + (j+idWordComplete) + '>' + textToWrite[j] + '</span>'
    document.getElementById("completeText").innerHTML = completeTextWithColors
    
   
}
document.getElementById("completeText").innerHTML = completeTextWithColors
idLetterComplete = 10000

//Github at: https://github.com/ztonaz
$(function() {

    $("#copy").on('input', function (){
   // Your stuff...
    $("#theCopy").val($("#copy").val());

        // o text your write
        o = $("#theCopy").val()

        lenText = o.length

        w = document.getElementById("whatIs").innerText

        //original text with length of your input
        original = w.substring(0, lenText)
        
        innerHas = document.getElementById("whatIs").innerHTML
        
        for (i=0; i<lenText; i++){
            const div = document.getElementById(i);
            
            if (o[i]==original[i]){
                div.style.color = "green"
                $('#'+ idWordComplete).html($('#whatIs').html()+" ");

            }
            else{
                if (div){
                    div.style.color = "red"
                    $('#'+ idWordComplete).html($('#whatIs').html()+" ");

                }
                
            }
        }

        for (i=lenText; i<innerHas.length; i++){
            $( "#" + i ).css( "color", "white" );
        }
    

         if (lenText==maxInputLen){
               // document.getElementById("copy").value = ""
               // ++indexInputLen
               // maxInputLen = textToWrite[indexInputLen].length
               // document.getElementById("whatIs").maxLength = maxInputLen

         }


                innerHas2 = document.getElementById("whatIs").innerHTML
                lenInput = $("#copy").val().length
                console.log("my input length: "+ lenInput + "\n" + "theThext lenth: "+(w.length+1))
                if (innerHas2.includes("red")){

                }
                else{
                     $('#'+ idWordComplete).html($('#whatIs').html()+" ");
                    if(indexWordIn != textToWrite.length){
                        str1 = $("#copy").val()
                        //if word and space correct go to next word
                        if (lenInput==w.length+1 && str1.indexOf(" ") != -1){
                            ++indexWordIn
                            //++wordInAllText
                            ttw=textToWrite[indexWordIn]
                            document.getElementById("whatIs").innerText = ttw
                            w = document.getElementById("whatIs").innerText
                            textWithColors = ""
                            for (var i = 0; i < w.length; i++) {
                                textWithColors = textWithColors + '<span id=' + i + ' style="color:white">' + w[i] + '</span>'
                            }

                            document.getElementById("whatIs").innerHTML = textWithColors
                            document.getElementById("copy").value = ""
                            document.getElementById("copy").maxLength = ttw.length

                            

                            deleteTheId = document.getElementById(idWordComplete).innerHTML
                            ha = deleteTheId.replaceAll('id=' , "p=")
                            document.getElementById(idWordComplete).innerHTML = ha

                            idWordComplete++
                        }


                         else{
                    if (str1.indexOf(".") != -1 && indexWordIn==textToWrite.length-1){
                        alert("final")
                    }

                }


                    }
               

        }

    });

    
});



function changeToNormal() {
    document.getElementById("completeText").style.opacity = "1";
    document.getElementById("whatIs").style.opacity = "0";
    document.getElementById("normal").style.opacity = "0.4";
    document.getElementById("eat").style.opacity = "1";
    document.getElementById("normalText").style.opacity="1";
    document.getElementById("eatText").style.opacity="0";

     document.getElementById("copy").focus();
}
function changeToEat() {
  document.getElementById("whatIs").style.opacity = "1";
  document.getElementById("completeText").style.opacity = "0";
  document.getElementById("normal").style.opacity = "1";
    document.getElementById("eat").style.opacity = "0.4";
    document.getElementById("normalText").style.opacity="0";
    document.getElementById("eatText").style.opacity="1";

  document.getElementById("copy").focus()
}





//visit my blog at ztonaz.com 


</script>


<style type="text/css">
    body{
        background: black;
    }
    .theContent{
        position: relative;
        width: 90%;
        height: 90vh;
        background: yellow;
        margin: auto;
        font-family: 'Brush Script MT', cursive;
        font-weight: bold;
        opacity: .9;

    }
    #copy{
           position:absolute;
        top:0;
        bottom:0;
        left:0;
        right:0;
        width:200px; /* Assign a value */
        height:50px; /* Assign a value */
        margin:auto;
        font-family: 'Brush Script MT', cursive;
        font-weight: bold;
        font-size: 1.4em;
        text-align: center;
        caret-color: red;
        caret-shape: block  ;
    }
    #whatIs{
        position:absolute;
        top:-60%;
        bottom:0;
        left:0;
        right:0;
        width:75%; /* Assign a value */
        height:50px; /* Assign a value */
        margin:auto;
        color: white;
        font-family: 'Brush Script MT', cursive;
        font-weight: bold;
        text-align: center;
        font-size: 2em;
    }
    #completeText{
        position:absolute;
        top:-60%;
        bottom:0;
        left:0;
        right:0;
        width:75%; /* Assign a value */
        height:50px; /* Assign a value */
        margin:auto;
        color: white;
        font-family: 'Brush Script MT', cursive;
        font-weight: bold;
        text-align: center;
        font-size: 2em;
    }

    .mods{
        position: absolute;
        top: 4px;
        width: 140px;
        height: 30px;
        background: white;
        font-family: 'Brush Script MT', cursive;
        font-weight: bold;
        border-style: none;
    }
    #normal{
        left: 4px;!important
    }
    #eat{
        left: 144px!important;
    }
    .modinfo{
        position: absolute;
        left: 7px;
        top: 24px;
        font-size: .6em;
    }

    #start{
        position:absolute;
        top:30%;
        bottom:0;
        left:0;
        right:0;
        width:200px; /* Assign a value */
        height:30px; /* Assign a value */
        margin:auto;
        color: white;
        background: #00FF00;
        border-style: none;
    }

</style>
